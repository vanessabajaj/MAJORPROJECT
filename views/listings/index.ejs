<% layout{"/layouts/boilerplate"} %>
<style>
    #filters {
        margin-top : 1rem;
        display: flex;
        flex-wrap:wrap;
    }
    .filter {
        text-align: center ;
        margin-right: 2rem;
        margin-top: 4rem;
        opacity: 0.7;
}

.filter:hover{
    opacity:1;
    cursor:pointer;
}
.filter p {
    font-size:0.3;
}
</style>
<div id ="filters"> 
    <div class="filter">
        <div> <i class="fa-solid fa-fire"></i></div>
       <p> Trending
</p>    </div>
    <div class="filter">
        <div> <i class="fa-solid fa-fire"></i></div>
       <p> rooms
</p>    </div>
  <div class="filter">
        <div> <i class="fa-solid fa-mountain-city"></i></div>
       <p> Iconic Cities 
</p>    </div>
    <div class="filter">
        <div> <i class="fa-solid fa-mountain"></i></div>
       <p> mountains
</p>    </div>
 <div class="filter">
        <div> <i class="fa-brands fa-fort-awesome"></i></div>
       <p> castles
</p>    </div>
 <div class="filter">
        <div> <i class="fa-solid fa-person-swimming"></i></div>
       <p> amazing pools
</p>    </div>
 <div class="filter">
        <div> <i class="fa-solid fa-campground"></i></div>
       <p> camping
</p>    </div>
<div class="tax-toggle"> 
    <div class="form-check-reverse form-switch">
         <input 
         class="form-check-input"
         type="checkbox"
         role="switch"
         id="flexSwitchCheckDefault" />
         <label class="form-check-label" for="flexSwitchCheckDefault"
         > display total after taxes </label>
    </div>
</div>
<div class="row ">
        <% for(let listing of allListings) { %>
            <a href="/listings/<%= listing._id %>" class="listing-link">
            <div class="col-md-4 mb-4 listing-cards">
                <div class="card h-100">
                    <img src="<%= listing.image.url || 'https://via.placeholder.com/300x200?text=No+Image' %>" class="card-img-top" alt="listing_image" style="height: 200px; object-fit: cover;">
                    <div class="card-img-overlay"></div>
                    <div class="card-body d-flex flex-column"> 
                        <h5 class="card-title"> <b> <%= listing.title %> </b></h5>
                        <p class="card-text text-muted mb-2"><%= listing.description %></p>
                        <p class="fw-bold mb-3">&#8377; <%= (listing.price != null) ? listing.price.toLocaleString("en-IN") : 'N/A' %></p>
                        <a href="/listings/<%= listing._id %>" class="btn btn-primary mt-auto">View Details</a>
                    </div>
                </div>
            </div>
        <% } %>
    </div>
<% } else { %>
    <p>No listings found</p>
<% } %>
<%- include('layouts/footer') %> 

<script>
    let taxSwitch = document.getElementById("flexSwitchCheck")
    taxSwitch.addEventListener("click",() => {
        console.log("clicked");
    })
</script>